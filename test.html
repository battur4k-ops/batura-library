<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batura Library // Design System Guideline</title>
    
    <!-- СИСТЕМНЫЕ ШРИФТЫ -->
    <!-- Подключаем Google Fonts для Inter и JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;700&family=JetBrains+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- ОСНОВНАЯ АРХИТЕКТУРА СТИЛЕЙ (ITCSS) -->
    <!-- Главный файл стилей, использующий ITCSS архитектуру, определенную в src/scss/ -->
    <link rel="stylesheet" href="src/scss/main.css">
    
    <!-- ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ГАЙДЛАЙНА -->
    <!-- Эти стили предназначены только для оформления самого гайдлайна, чтобы сделать его более читаемым. -->
    <style>
        .guideline-section {
            margin-bottom: var(--space-xl); /* Большой отступ между секциями */
            padding: var(--space-lg); /* Внутренние отступы секции */
            background-color: rgba(var(--rgb-ui-bg), 0.05); /* Легкий полупрозрачный фон */
            border-radius: var(--radius-base); /* Стандартное скругление углов */
            border: 1px solid rgba(var(--rgb-ui-stroke), 0.1); /* Тонкая обводка */
        }
        .guideline-example {
            margin-top: var(--space-md); /* Отступ сверху для каждого примера */
            margin-bottom: var(--space-md); /* Отступ снизу для каждого примера */
            padding: var(--space-md); /* Внутренние отступы примера */
            background-color: rgba(var(--rgb-ui-bg), 0.03); /* Еще более легкий фон */
            border-radius: var(--radius-inner); /* Внутреннее скругление углов */
            border: 1px dashed rgba(var(--rgb-ui-stroke), 0.05); /* Пунктирная обводка для выделения */
        }
    </style>
</head>
<!-- Класс is-loading для анимации загрузки, data-page="guideline" для возможной специфичной логики -->
<body class="is-loading" data-page="guideline">

    <!-- СЛОЙ 0: ФОНОВЫЙ ШЕЙДЕР -->
    <!-- Использует Three.js и src/js/background.js для создания динамического интерактивного фона. -->
    <canvas id="liquid-bg-canvas"></canvas>

    <!-- СЛОЙ 100: НАВИГАЦИОННАЯ ПАНЕЛЬ -->
    <!-- Кастомный веб-компонент <batura-navbar> из src/js/components/navbar.js -->
    <batura-navbar></batura-navbar>

    <div id="app-wrapper">
        <main id="app-root">
            
            <!-- СЕКЦИЯ: ГЛАВНЫЙ МАНИФЕСТ ДИЗАЙН-СИСТЕМЫ -->
            <!-- Демонстрирует основные принципы и ключевые типографические стили. -->
            <section class="l-container" style="padding-top: calc(var(--nav-h-start) * 2);">
                <div class="l-flow">
                    <span class="text-data">// SYSTEM_GUIDELINE // V7.6</span>
                    <h1 class="text-hero">Batura <br> Design System</h1>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Сашенька, этот файл — твой интерактивный гайдлайн! Здесь ты найдешь демонстрации всех ключевых элементов, их состояний и примеры логичного комбинирования, построенные на принципах цифровой физики и математической вложенности твоей Batura Library.
                    </p>
                </div>
            </section>

            <!-- СЕКЦИЯ: ТИПОГРАФИКА -->
            <!-- Демонстрирует все доступные классы типографики и их иерархию, определенную в 2-elements/_text.scss. -->
            <section class="l-container guideline-section">
                <div class="l-flow" style="margin-bottom: var(--space-lg);">
                    <span class="text-data">01 // Typography Hierarchy</span>
                    <h2 class="text-heading">Все стили текста</h2>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Используй эти классы для поддержания единого визуального стиля и иерархии текста в проекте.
                    </p>
                </div>

                <div class="guideline-example l-flow">
                    <h1 class="text-hero">Hero Style (Batura Library)</h1>
                    <p class="text-body" style="opacity: 0.7;">Самый крупный и акцентный заголовок. Идеален для главных секций.</p>
                </div>
                <div class="guideline-example l-flow">
                    <h2 class="text-heading">Heading Style (28px Inter Bold)</h2>
                    <p class="text-body" style="opacity: 0.7;">Заголовки второго уровня для разделов и подсекций.</p>
                </div>
                <div class="guideline-example l-flow">
                    <h3 class="text-heading" style="font-size: 24px;">Sub-Heading Style (24px Inter Medium)</h3>
                    <p class="text-body" style="opacity: 0.7;">Заголовки третьего уровня или более мелкие подзаголовки.</p>
                </div>
                <div class="guideline-example l-flow">
                    <p class="text-body">
                        Это основной текст (Body Text), используемый в библиотеке. Размер 16px, шрифт Inter Regular, Line-height 1.6. 
                        Используется для большей части контента.
                    </p>
                </div>
                <div class="guideline-example l-flow">
                    <span class="text-data">Data Mono 11px // 0xFB249_READY</span>
                    <p class="text-body" style="font-size: 14px; opacity: 0.7;">
                        Стилизованный текст для метаданных, системных сообщений, небольших подписей. Использует шрифт JetBrains Mono.
                    </p>
                </div>
            </section>

            <!-- СЕКЦИЯ: КНОПКИ (UI-BUTTON) -->
            <!-- Демонстрирует различные состояния и вариации кнопок. -->
            <section class="l-container guideline-section">
                <div class="l-flow" style="margin-bottom: var(--space-lg);">
                    <span class="text-data">02 // Interaction Matrix</span>
                    <h2 class="text-heading">Кнопки и их состояния</h2>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Все кнопки `ui-button` имеют согласованные стили и поддерживают различные состояния.
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-md);">
                    <!-- СОСТОЯНИЕ: IDLE (Обычная) -->
                    <div class="b-card b-card--static" style="height: auto; padding: var(--space-md);">
                        <div class="l-flow">
                            <span class="text-data">// STATE: IDLE</span>
                            <button class="ui-button">System Ready</button>
                            <p class="text-body" style="font-size: 14px; opacity: 0.4;">Кнопка в спокойном состоянии. Стандартный вид.</p>
                        </div>
                    </div>
                    <!-- СОСТОЯНИЕ: HOVER (Наведение) -->
                    <div class="b-card b-card--static" style="height: auto; padding: var(--space-md);">
                        <div class="l-flow">
                            <span class="text-data">// STATE: HOVER</span>
                            <!-- Принудительно устанавливаем стили для состояния hover через CSS переменные. -->
                            <button class="ui-button" style="--btn-bg-op: var(--s-glass-op-hover); --btn-stroke-op: var(--s-stroke-op-hover); --btn-glare-op: 1;">Hover Action</button>
                            <p class="text-body" style="font-size: 14px; opacity: 0.4;">Визуализация состояния при наведении курсора.</p>
                        </div>
                    </div>
                    <!-- СОСТОЯНИЕ: ACTIVE (Нажатие) -->
                    <div class="b-card b-card--static" style="height: auto; padding: var(--space-md);">
                        <div class="l-flow">
                            <span class="text-data">// STATE: ACTIVE</span>
                            <!-- Принудительно устанавливаем стили для состояния active через CSS переменные. -->
                            <button class="ui-button" style="--btn-bg-op: var(--s-glass-op-active); --btn-stroke-op: var(--s-stroke-op-active); --btn-glare-op: 0.4;">Active Core</button>
                            <p class="text-body" style="font-size: 14px; opacity: 0.4;">Визуализация состояния при активном нажатии.</p>
                        </div>
                    </div>
                    <!-- ВАРИАЦИЯ: Кнопка с логотипом -->
                    <div class="b-card b-card--static" style="height: auto; padding: var(--space-md);">
                        <div class="l-flow">
                            <span class="text-data">// VARIATION: LOGO BUTTON</span>
                            <button class="ui-button ui-button--logo">
                                <div class="b-logo">
                                    <!-- SVG иконка логотипа Batura. Ее стили определены в 5-components/_logo.scss. -->
                                    <svg viewBox="0 0 796 1027" xmlns="http://www.w3.org/2000/svg"><path d="M327.5 0H795.5L749 1027H409L425.5 893.5H384.5L357 1027H0L327.5 0Z" fill="currentColor"/></svg>
                                </div>
                            </button>
                            <p class="text-body" style="font-size: 14px; opacity: 0.4;">Кнопка, содержащая элемент `b-logo`.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- СЕКЦИЯ: КАРТОЧКИ (B-CARD) И РЕКУРСИВНАЯ ГЕОМЕТРИЯ -->
            <!-- Демонстрирует, как карточки могут быть вложены друг в друга, создавая геометрические слои с математически выверенными радиусами. -->
            <section class="l-container guideline-section">
                <div class="l-flow" style="margin-bottom: var(--space-lg);">
                    <span class="text-data">03 // Geometric Law</span>
                    <h2 class="text-heading">Рекурсивная геометрия карточек</h2>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Карточки `b-card` поддерживают вложенность. Внутренний `border-radius` рассчитывается 
                        на основе внешнего и заданных отступов, поддерживая математическую согласованность (определено в 0-settings/_borders.scss).
                    </p>
                </div>

                <!-- УРОВЕНЬ 0: МАСТЕР-КАРТОЧКА (R=45px по умолчанию) -->
                <div class="b-card b-card--static" style="height: auto; padding: var(--space-lg);">
                    <div class="l-flow">
                        <span class="text-data">Level 0: Master Card (R=45px)</span>
                        
                        <!-- УРОВЕНЬ 1: ВЛОЖЕННЫЙ СЛОЙ (R=13px) -->
                        <div class="b-card b-card--static" style="height: auto; padding: var(--space-md); border-radius: var(--radius-inner); --card-bg-op: 0.03;">
                            <div class="l-flow">
                                <span class="text-data">Level 1: Nested Layer (R=13px)</span>
                                
                                <div style="display: flex; gap: var(--space-md); align-items: center;">
                                    <!-- УРОВЕНЬ 2: АТОМ (Кнопка внутри) -->
                                    <button class="ui-button">Level 2: Button</button>
                                    <p class="text-body" style="font-size: 14px; opacity: 0.4;">
                                        R_inner (13px) = R_master (45px) - Padding (32px). Пример математической вложенности.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- СЕКЦИЯ: HOVER CASCADE ПРОТОКОЛ -->
            <!-- Демонстрирует, как наведение на родительский элемент (карточку) может активировать эффекты на дочерних элементах (кнопках). -->
            <section class="l-container guideline-section">
                <div class="l-flow" style="margin-bottom: var(--space-lg);">
                    <span class="text-data">04 // Interaction Protocol</span>
                    <h2 class="text-heading">Hover Cascade Effect</h2>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Наведение курсора на эту интерактивную карточку `b-card` (родительский элемент) автоматически активирует 
                        состояние "hover" для всех кнопок `ui-button` внутри неё.
                    </p>
                </div>

                <div class="b-card" style="height: auto; padding: var(--space-lg);">
                    <div class="l-flow">
                        <span class="text-data">// PROTOCOL: TRIGGER_CHILDREN</span>
                        <h3 class="text-heading">Cascade Response</h3>
                        <p class="text-body">Наведите курсор на эту карточку, чтобы увидеть, как кнопки внутри реагируют на наведение родителя.</p>
                        <div style="display: flex; gap: var(--space-md); margin-top: var(--space-md);">
                            <button class="ui-button">Action A</button>
                            <button class="ui-button">Action B</button>
                            <button class="ui-button ui-button--logo">
                                <div class="b-logo">
                                    <svg viewBox="0 0 796 1027" xmlns="http://www.w3.org/2000/svg"><path d="M327.5 0H795.5L749 1027H409L425.5 893.5H384.5L357 1027H0L327.5 0Z" fill="currentColor"/></svg>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- СЕКЦИЯ: АККОРДЕОН (B-ACCORDION) -->
            <!-- Демонстрирует интерактивный компонент аккордеона, управляющий видимостью контента. -->
            <section class="l-container guideline-section">
                <div class="l-flow" style="margin-bottom: var(--space-lg);">
                    <span class="text-data">05 // Dynamic Components</span>
                    <h2 class="text-heading">Аккордеон: интерактивные карточки</h2>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Компонент `b-accordion` (определенный в 5-components/_accordion.scss) управляет видимостью контента внутри `b-card`. 
                        Клик по карточке делает её активной и скрывает остальные внутри того же аккордеона.
                    </p>
                </div>

                <div class="b-accordion">
                    <!-- АККОРДЕОН: ЭЛЕМЕНТ 1 (АКТИВНЫЙ ПО УМОЛЧАНИЮ) -->
                    <div class="b-card is-active" data-index="0">
                        <div class="b-card__viewport">
                            <div class="b-card__content l-flow">
                                <span class="text-data">// 0x1_CORE</span>
                                <h3 class="text-heading">Digital Physics</h3>
                                <p class="text-body">Кнопка появляется с плотностью 0.01 и подсвечивается до 0.05 при наведении на карту. Это пример правила из 0-settings/.</p>
                                <button class="ui-button">Initialize</button>
                            </div>
                        </div>
                        <div class="b-card__index text-data">01</div>
                        <div class="b-card__label text-data">System_Core</div>
                    </div>
                    <!-- АККОРДЕОН: ЭЛЕМЕНТ 2 -->
                    <div class="b-card" data-index="1">
                        <div class="b-card__viewport">
                            <div class="b-card__content l-flow">
                                <span class="text-data">// 0x2_DATA</span>
                                <h3 class="text-heading">Layered DNA</h3>
                                <p class="text-body">Суммирование прозрачности и блюра при наложении нескольких стекол, как определено в 4-materials/_glass.scss.</p>
                                <button class="ui-button">Check Layers</button>
                            </div>
                        </div>
                        <div class="b-card__index text-data">02</div>
                        <div class="b-card__label text-data">Material_DNA</div>
                    </div>
                    <!-- АККОРДЕОН: ЭЛЕМЕНТ 3 (пример с другим контентом) -->
                    <div class="b-card" data-index="2">
                        <div class="b-card__viewport">
                            <div class="b-card__content l-flow">
                                <span class="text-data">// 0x3_INTERFACE</span>
                                <h3 class="text-heading">Unified Interface</h3>
                                <p class="text-body">Демонстрация единого подхода к проектированию интерфейсов, где каждый элемент согласован.</p>
                                <button class="ui-button">Explore UI</button>
                            </div>
                        </div>
                        <div class="b-card__index text-data">03</div>
                        <div class="b-card__label text-data">User_Experience</div>
                    </div>
                </div>
            </section>
            
            <!-- СЕКЦИЯ: КОМБИНИРОВАННЫЕ ЭЛЕМЕНТЫ -->
            <!-- Показывает, как различные элементы Design System могут быть объединены для создания сложного, но согласованного блока. -->
            <section class="l-container guideline-section">
                <div class="l-flow" style="margin-bottom: var(--space-lg);">
                    <span class="text-data">06 // Combined Elements</span>
                    <h2 class="text-heading">Пример комплексного блока</h2>
                    <p class="text-body" style="max-width: 600px; opacity: 0.6;">
                        Эта секция демонстрирует, как можно гармонично комбинировать типографику, кнопки, 
                        логотип и компонент `b-card` для создания функциональных и визуально привлекательных блоков.
                    </p>
                </div>
                <div class="b-card" style="height: auto; padding: var(--space-lg);">
                    <div class="l-flow">
                        <span class="text-data">// FEATURED_BLOCK // V1.0</span>
                        <h2 class="text-hero" style="font-size: 3em;">Dynamic <br> Content Hub</h2>
                        <p class="text-body">
                            Используйте этот шаблон для создания привлекательных блоков с важной информацией.
                            Все отступы и типографика автоматически согласуются с дизайн-системой.
                        </p>
                        <div style="display: flex; gap: var(--space-md); margin-top: var(--space-md);">
                            <button class="ui-button">Learn More</button>
                            <button class="ui-button ui-button--logo">
                                <div class="b-logo">
                                    <svg viewBox="0 0 796 1027" xmlns="http://www.w3.org/2000/svg"><path d="M327.5 0H795.5L749 1027H409L425.5 893.5H384.5L357 1027H0L327.5 0Z" fill="currentColor"/></svg>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </section>


            <!-- УНИФИЦИРОВАННЫЙ ФУТЕР -->
            <!-- Кастомный веб-компонент <batura-footer> из src/js/components/footer.js -->
            <batura-footer></batura-footer>

        </main>
    </div>

    <!-- СКРИПТЫ -->
    <!-- Подключение Three.js для работы с 3D графикой и шейдером фона -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Логика фонового шейдера, использующего Three.js -->
    <script src="src/js/background.js"></script>
    <!-- Главный скрипт проекта, который импортирует все остальные JavaScript компоненты как модули -->
    <script src="src/js/main.js" type="module"></script>
    
    <script>
        // Универсальный контроллер для аккордеона
        // Активирует/деактивирует карточки b-card внутри b-accordion по клику.
        document.querySelectorAll('.b-accordion').forEach(accordion => {
            accordion.querySelectorAll('.b-card').forEach(card => {
                card.addEventListener('click', () => {
                    // Игнорируем клики на статичных карточках (b-card--static)
                    if(card.classList.contains('b-card--static')) return;
                    
                    // Деактивируем все карточки в этом конкретном аккордеоне
                    accordion.querySelectorAll('.b-card').forEach(c => c.classList.remove('is-active'));
                    // Активируем текущую карточку
                    card.classList.add('is-active');
                });
            });
        });
        
        // Удаляем класс is-loading после полной загрузки страницы
        // Это инициирует начальную анимацию или скрывает прелоадер.
        window.addEventListener('load', () => document.body.classList.remove('is-loading'));
    </script>
</body>
</html>